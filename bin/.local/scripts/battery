#!/bin/bash

CRITICAL_ALERT=15
NORMAL_ALERT=25
LOW_ALERT=40

while true; do
  batteryCapacity=$(cat /sys/class/power_supply/BAT1/capacity)
  batteryStatus=$(cat /sys/class/power_supply/BAT1/status)

  if [[ "$batteryStatus" == "Discharging" ]]; then
    if [[ $batteryCapacity -le $CRITICAL_ALERT ]]; then
      notify-send -u critical -t 0 "󰂎 Battery Low" "Battery is at $batteryCapacity%"
      sleep 120 # 2 mins
    elif [[ $batteryCapacity -le $NORMAL_ALERT ]]; then
      notify-send -u normal "󰁻 Battery Warning" "Battery is at $batteryCapacity%"
      sleep 420 # 7 mins
    elif [[ $batteryCapacity -le $LOW_ALERT ]]; then
      notify-send -u low "󰁽 Battery Info" "Consider plugging in the charger. Battery is at $batteryCapacity%"
      sleep 900 # 15 mins
    else
      sleep 2250 # 45mins
    fi
  elif [[ "$batteryStatus" == "Charging" ]]; then
    if [[ $batteryStatus -ge 90 ]]; then
      notify-send -u low "󰁹 Battery almost full" "You can unplug the charger."
      sleep 600 # 10 mins
    fi
  fi
done
